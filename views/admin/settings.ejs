<%- include("../../partials/admin-header") -%>
<%- include("../../partials/admin-nav") -%>
<div class="content-wrapper p-5">
  
  <div class="row">
    <div class="col-md-12 stretch-card">
      <div class="card">
        <div class="card-body">
          <p class="card-title">Settings</p>
          <div class="settingsForm">
            <form id="formID" method="post" enctype="multipart/form-data">
              <div class="form-group">
                <label for="title">Site Title</label>
                <input type="text" class="form-control" name="logo"  id="title" placeholder="logo">
              </div>
              <div class="d-flex form-group row">
                <div class="col-lg-4">
                  <label for="img">Logo</label>
                  <input type="file" style="border: none !important;" class="form-control" name="img" id="img">
                </div>
                <div id="imgPreviewBox" class="col-lg-8 text-center" style="height: 500px;width: auto;margin: auto;overflow: scroll;position: relative;">
                  <img src="" id="logoPreview"  class="img-fluid"style="left: 50%;transform: translate(-50%, 0);position: absolute;">
                </div>
              </div>
              <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" class="form-control" name="email" id="email" placeholder="name@example.com">
              </div>
              <div class="form-group">
                <label for="number">Contact Number</label>
                <input type="text" class="form-control" name="number" id="number" placeholder="name@example.com">
              </div>
              <div class="form-group">
                <label for="address">Address</label>
                <input type="text" class="form-control" name="address" id="address" placeholder="type address here">
              </div>
              <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control border" name="description" id="description" rows="3" placeholder="description" maxlength="150"></textarea>
              </div>
              <div class="form-group w-75">
                <label for="description">Social Links</label>
                <div class="form-group">
                  <label for="fb">Facebook</label>
                  <input type="text" class="form-control" name="fb" id="fb" placeholder="https://facebook.com">
                </div>
                <div class="form-group">
                  <label for="instagram">Instagram</label>
                  <input type="text" class="form-control" name="instagram" id="instagram" placeholder="https://instagram.com">
                </div>
                <div class="form-group">
                  <label for="twitter">Twitte</label>
                  <input type="text" class="form-control" name="twitter" id="twitter" placeholder="https://twitter.com">
                </div>
              </div>
              <div>
                <button type="submit" id="submit" class="btn btn-primary">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
$('#imgPreviewBox').hide();
/*Swal.fire({
title: 'Are you sure?',
text: "You won't be able to revert this!",
icon: 'warning',
showCancelButton: true,
confirmButtonColor: '#3085d6',
cancelButtonColor: '#d33',
confirmButtonText: 'Yes, delete it!'
}).then((result)=> {
console.log(result)
})
*/
function showToast(){
toastr["success"]("ripon", "Ripon");
toastr["error"]("ripon", "Ripon");
toastr["warning"]("ripon", "Ripon");
toastr["info"]("ripon", "Ripon");
}
</script>
<script>
$('form').on('submit',(e) => {
e.preventDefault();
var formData = new FormData(document.getElementById('formID'));
/*const formData = $('form').serializeArray();
console.log(formData)
let data = {
social_links : {}
};
for (key in formData) {
if(formData[key].name == 'fb' || formData[key].name == 'twitter' || formData[key].name == 'instagram'){
data.social_links[formData[key].name] = formData[key].value;
}else{
data[formData[key].name] = formData[key].value;
}


}*/

$.ajax({
type: "POST",
url: '/settings',
data: formData,
processData: false,
contentType: false,
success: function(response) {
alert("succces")
},
error : function(err) {
console.log(err)
}
});
})
</script>
<script>
function readURL(input) {
if (input.files && input.files[0]) {
var reader = new FileReader();
reader.onload = function(e) {
function na(){
let im = document.createElement("logoPreview");
// im.src = e.target.result;
$('#logoPreview').attr("src", e.target.result)
$('#imgPreviewBox').show(300);
console.log(e.target.result)
// photos.push(e.target.result);
// photos.save();
// inp = photos;
// photoContainer.appendChild(im);
}
na();
// console.log(e.target.result)
}
reader.readAsDataURL(input.files[0]); // convert to base64 string
}
}
$("#img").change(function() {
readURL(this);
});
</script>
<%- include("../../partials/admin-footer") -%>